Metadata-Version: 2.4
Name: jarvis-telegram-assistant
Version: 0.1.0
Summary: Telegram personal assistant agent powered by Codex CLI
Author: Jarvis
License: MIT
Requires-Python: >=3.11
Description-Content-Type: text/markdown
Requires-Dist: python-telegram-bot>=21.0
Requires-Dist: aiosqlite>=0.20.0
Requires-Dist: PyYAML>=6.0.1
Requires-Dist: APScheduler>=3.10.4
Requires-Dist: aiohttp>=3.9.5
Requires-Dist: psutil>=5.9.8

# Jarvis - Telegram ä¸ªäººåŠ©ç† Agent

åŸºäº Codex SDK çš„é•¿æœŸåœ¨çº¿ä¸ªäººåŠ©ç†ï¼Œé€šè¿‡ Telegram bot è¿›è¡ŒåŒå‘é€šä¿¡ï¼Œæ”¯æŒè¢«åŠ¨å“åº”å’Œä¸»åŠ¨æ¨é€ã€‚

## ç‰¹æ€§

- ğŸ¤– **æ™ºèƒ½å¯¹è¯**ï¼šåŸºäº Codex CLI çš„ AI åŠ©æ‰‹ï¼Œæ”¯æŒä¸Šä¸‹æ–‡è®°å¿†
- ğŸ“ **ä»»åŠ¡ç®¡ç†**ï¼šæ·»åŠ ã€æŸ¥çœ‹ã€å®Œæˆä»»åŠ¡
- â° **æé†’ç³»ç»Ÿ**ï¼šå®šæ—¶æé†’åŠŸèƒ½
- ğŸ“Š **ç³»ç»Ÿç›‘æ§**ï¼šCPUã€å†…å­˜ã€ç£ç›˜ã€è´Ÿè½½ç›‘æ§
- ğŸ”” **ä¸»åŠ¨æ¨é€**ï¼šå®šæ—¶ä»»åŠ¡ã€ç›‘æ§å‘Šè­¦ã€Webhook è§¦å‘
- ğŸ”„ **ä¼šè¯ç®¡ç†**ï¼šç‹¬ç«‹ä¼šè¯ã€é‡ç½®ã€å‹ç¼©åŠŸèƒ½

## æ¶æ„

é‡‡ç”¨äº‹ä»¶é©±åŠ¨æ¶æ„ï¼Œæ ¸å¿ƒç»„ä»¶ï¼š
- **Event Bus**ï¼šä¸­å¤®äº‹ä»¶æ€»çº¿
- **Telegram Bot Manager**ï¼šæ¶ˆæ¯æ”¶å‘
- **Codex Manager**ï¼šCodex CLI å°è£…å’Œä¼šè¯ç®¡ç†
- **Trigger System**ï¼šå®šæ—¶ä»»åŠ¡ã€ç›‘æ§ã€Webhook
- **Storage Layer**ï¼šSQLite + æ–‡ä»¶å­˜å‚¨

è¯¦ç»†è®¾è®¡è§ [è®¾è®¡æ–‡æ¡£](docs/plans/2026-01-29-telegram-assistant-design.md)

## å¿«é€Ÿå¼€å§‹

### æœ¬åœ°å¼€å‘

1. å®‰è£…ä¾èµ–ï¼š
   ```bash
   pip install -e .
   ```

2. é…ç½®ï¼š
   ```bash
   cp config.sample.yaml config.yaml
   # ç¼–è¾‘ config.yamlï¼Œå¡«å…¥ Telegram Bot Token
   ```

3. è¿è¡Œï¼š
   ```bash
   python -m jarvis --config config.yaml
   ```

### VPS éƒ¨ç½²

ä½¿ç”¨ä¸€é”®å®‰è£…è„šæœ¬ï¼š

```bash
# å°†ä»£ç ä¸Šä¼ åˆ°æœåŠ¡å™¨
git clone <YOUR_REPO> /opt/jarvis

# è¿è¡Œå®‰è£…è„šæœ¬
sudo /opt/jarvis/scripts/install.sh

# ç¼–è¾‘é…ç½®
sudo nano /etc/jarvis/config.yaml
sudo nano /etc/jarvis/jarvis.env

# é‡å¯æœåŠ¡
sudo systemctl restart jarvis

# æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u jarvis -f
```

è¯¦ç»†éƒ¨ç½²æ­¥éª¤è§ [éƒ¨ç½²æ–‡æ¡£](docs/deploy.md)

## å¯ç”¨å‘½ä»¤

### åŸºç¡€å‘½ä»¤
- `/start` - å¼€å§‹å¯¹è¯
- `/help` - æŸ¥çœ‹å¸®åŠ©
- `/reset` - é‡ç½®ä¼šè¯
- `/compact` - å‹ç¼©ä¼šè¯ä¸Šä¸‹æ–‡

### ä»»åŠ¡ç®¡ç†
- `/task add <æè¿°>` - æ·»åŠ ä»»åŠ¡
- `/task list` - æŸ¥çœ‹ä»»åŠ¡åˆ—è¡¨
- `/task done <id>` - å®Œæˆä»»åŠ¡

### æé†’åŠŸèƒ½
- `/remind <YYYY-MM-DD HH:MM> <å†…å®¹>` - æ·»åŠ æé†’
- `/remind list` - æŸ¥çœ‹æé†’åˆ—è¡¨
- `/remind cancel <id>` - å–æ¶ˆæé†’

## é…ç½®è¯´æ˜

### config.yaml

```yaml
telegram:
  token: "YOUR_BOT_TOKEN"  # Telegram Bot Token

codex:
  workspace_dir: "~/workspace"  # Codex å·¥ä½œç›®å½•
  exec_path: "codex"  # Codex CLI è·¯å¾„
  timeout_seconds: 120  # è¶…æ—¶æ—¶é—´

storage:
  db_path: "~/.jarvis/jarvis.db"  # æ•°æ®åº“è·¯å¾„
  session_dir: "~/.jarvis/sessions"  # ä¼šè¯å­˜å‚¨ç›®å½•

triggers:
  scheduler:
    - name: "daily_summary"
      cron: "0 9 * * *"  # æ¯å¤© 9 ç‚¹
      action: "send_summary"

  monitors:
    - name: "cpu_alert"
      type: "cpu"
      threshold: 80  # CPU ä½¿ç”¨ç‡è¶…è¿‡ 80% å‘Šè­¦
      interval: 60  # æ£€æŸ¥é—´éš”ï¼ˆç§’ï¼‰

logging:
  level: "INFO"
  file: "/var/log/jarvis/jarvis.log"  # æ—¥å¿—æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
```

### ç¯å¢ƒå˜é‡ï¼ˆ.envï¼‰

æ•æ„Ÿä¿¡æ¯å»ºè®®é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
TELEGRAM_BOT_TOKEN=your_token_here
WEBHOOK_TOKEN=your_webhook_token
JARVIS_LOG_FILE=/var/log/jarvis/jarvis.log
```

## å·¥å…·è„šæœ¬

- `scripts/install.sh` - ä¸€é”®å®‰è£…ï¼ˆåˆ›å»ºç”¨æˆ·ã€ç›®å½•ã€venvã€systemd æœåŠ¡ï¼‰
- `scripts/run.sh` - æœ¬åœ°è¿è¡Œè„šæœ¬
- `scripts/smoke_test.sh` - é…ç½®å’Œå­˜å‚¨æµ‹è¯•

## æŠ€æœ¯æ ˆ

- Python 3.11+
- python-telegram-botï¼ˆå¼‚æ­¥ç‰ˆæœ¬ï¼‰
- Codex CLIï¼ˆé€šè¿‡ subprocess è°ƒç”¨ï¼‰
- SQLite3 + aiosqlite
- APSchedulerï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰
- aiohttpï¼ˆWebhook æœåŠ¡å™¨ï¼‰
- psutilï¼ˆç³»ç»Ÿç›‘æ§ï¼‰

## é¡¹ç›®ç»“æ„

```
jarvis/
â”œâ”€â”€ jarvis/              # ä¸»ä»£ç 
â”‚   â”œâ”€â”€ app.py          # åº”ç”¨ä¸»é€»è¾‘
â”‚   â”œâ”€â”€ event_bus.py    # äº‹ä»¶æ€»çº¿
â”‚   â”œâ”€â”€ config.py       # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ codex/          # Codex ç®¡ç†
â”‚   â”œâ”€â”€ telegram/       # Telegram Bot
â”‚   â”œâ”€â”€ triggers/       # è§¦å‘å™¨ç³»ç»Ÿ
â”‚   â””â”€â”€ storage/        # å­˜å‚¨å±‚
â”œâ”€â”€ docs/               # æ–‡æ¡£
â”œâ”€â”€ scripts/            # å·¥å…·è„šæœ¬
â”œâ”€â”€ deploy/             # éƒ¨ç½²é…ç½®
â””â”€â”€ config.sample.yaml  # é…ç½®ç¤ºä¾‹
```

## å¼€å‘

### è¿è¡Œæµ‹è¯•

```bash
./scripts/smoke_test.sh
```

### ä»£ç æ£€æŸ¥

```bash
ruff check jarvis/
```

## è®¸å¯è¯

MIT License

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

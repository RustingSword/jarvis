# Twitter For You 主题汇总改造设计

日期：2026-02-01

## 背景
当前定时任务 `twitter_for_you_summary` 仅逐条输出 30 条推文摘要。需求变更为：按主题自动聚类汇总，并重点关注 AI 相关消息，输出更详细的 AI 主题说明。

## 目标
- 输出结构清晰：主题汇总 + AI 主题详述 + 代表推文清单。
- 自动聚类：3–6 个主题，避免碎片化。
- AI 优先：AI/Agent/模型/算力/工具/安全相关内容更详细。
- 低侵入：仅调整 `config.yaml` 中任务指令，不改调度逻辑或脚本。

## 输出结构（固定模板）
1) 主题汇总：每个主题 2–4 句概述。
2) AI 主题详述：比其他主题更长，包含关键观点、潜在影响、争议点。
3) 代表推文清单：每个主题 2–4 条，包含作者/时间/摘要/链接/互动（赞/评/转）。

若本轮无明显 AI 内容，则输出“未发现显著 AI 主题”，避免硬凑。

## 数据流
- 定时触发 → 使用 bird 读取 For You 30 条 → LLM 依据指令聚类与总结。
- 仅更新任务 message 文案，不新增工具调用与脚本。

## 聚类策略（指令约束）
- 先完整扫描 30 条，再做主题分组。
- 主题数量 3–6 个，优先合并相近话题。
- 聚类依据：关键词、实体（产品/人物/公司）、场景（安全事故、产品发布、行业观察、娱乐等）。
- AI 主题识别：涉及 AI/LLM/Agent/模型/算力/工具/安全/数据泄露/自动化均归入 AI 主题；必要时拆分为“AI/Agent 工具生态”与“AI 安全/事故”。

## 边界与异常处理
- 仅链接或图片：允许“信息不足”说明，但保留链接与基本互动数据。
- AI 内容稀少：明确标注未出现显著 AI 主题。
- 保留可追溯信息，避免纯主观总结。

## 配置改动
- 修改 `config.yaml` 中 `triggers.scheduler.twitter_for_you_summary.message` 文案。
- 其他字段（cron/chat_id/name）不变。

## 验证方式
- 等待定时任务触发或手动触发一次，检查输出是否符合结构与 AI 详述要求。
- 若主题过多或 AI 段落不够详细，再微调指令文本。
